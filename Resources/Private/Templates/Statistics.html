<f:layout name="Default" />

<f:section name="content">
<f:flashMessages />
<f:if condition="{show}">
    <f:variable name="lll" value="LLL:EXT:direct_mail/Resources/Private/Language/locallang_mod2-6.xlf:" />
    <h1><f:translate key="{lll}stats_overview_header" /></h1>
	<f:if condition="{data.dataPageInfo}">
	    <f:then>
	       <f:render section="dataPageInfo" arguments="{dataPageInfo:data.dataPageInfo}" />
	    </f:then>
	    <f:else if="{data.dataUserInfo}">
	       <f:format.raw>{data.dataUserInfo}</f:format.raw>
	    </f:else>
	    <f:else if="{data.dataStats}">
	       <f:render section="dataStats" arguments="{dataStats:data.dataStats}" />
        </f:else>
        <f:else if="{data.dataHook}">
            <f:format.raw>{data.dataHook}</f:format.raw>
        </f:else>
	</f:if>
</f:if>
</f:section>

<f:section name="dataPageInfo">
    <f:variable name="lll" value="LLL:EXT:direct_mail/Resources/Private/Language/locallang_mod2-6.xlf:" />
    <h3><f:translate key="{lll}stats_overview_choose" /></h3>
    <table border="0" cellpadding="0" cellspacing="0" class="table table-striped table-hover">
        <thead>
			<th>&nbsp;</th>
			<th><b><f:translate key="{lll}stats_overview_subject" /></b></th>
			<th><b><f:translate key="{lll}stats_overview_scheduled" /></b></th>
			<th><b><f:translate key="{lll}stats_overview_delivery_begun" /></b></th>
			<th><b><f:translate key="{lll}stats_overview_delivery_ended" /></b></th>
			<th nowrap="nowrap"><b><f:translate key="{lll}stats_overview_total_sent" /></b></th>
			<th><b><f:translate key="{lll}stats_overview_status" /></b></th>
        </thead>
        <f:for each="{dataPageInfo}" as="row">
            <tr class="db_list_normal">
                <td><f:format.html>{row.icon}</f:format.html></td>
                <td><f:format.html>{row.subject}</f:format.html></td>
	            <td>{row.scheduled}</td>
	            <td>{row.scheduled_begin}</td>
	            <td>{row.scheduled_end}</td>
	            <td><f:if condition="{row.sent}">{row.sent}</f:if></td>
	            <td>{row.status}</td>
            </tr>
        </f:for>
    </table>
    <div style="padding-top: 20px;"></div>
</f:section>

<f:section name="dataStats">
    <f:render section="compactView" arguments="{row:dataStats.compactView}" />
    <f:format.raw>{dataStats.out}</f:format.raw>
</f:section>

<f:section name="compactView">
    <f:variable name="lll" value="LLL:EXT:direct_mail/Resources/Private/Language/locallang_mod2-6.xlf:" />
    <h3><f:translate key="{lll}stats_direct_mail" /></h3>
    <table class="table table-striped table-hover">
        <tr class="t3-row-header">
            <td colspan="3"><f:format.html>{row.icon}</f:format.html> {row.subject}</td>
        </tr>
        <tr class="db_list_normal">
            <td><f:translate key="{lll}view_from" /></td>
            <td>{row.from_name} &lt;{row.from_email}&gt;</td>
            <td><span title="{row.fromInfo -> f:format.html()}"><f:format.html>{row.iconInfo}</f:format.html></span></td>
        </tr>
        <tr class="db_list_normal">
            <td><f:translate key="{lll}view_dmail" /></td>
            <td>{row.type} : {row.dmailData}</td>
            <td><span title="{row.dmailInfo -> f:format.html()}"><f:format.html>{row.iconInfo}</f:format.html></span></td>
        </tr>
        <tr class="db_list_normal">
            <td><f:translate key="{lll}view_mail" /></td>
            <td>{row.sendOptions}{row.attachment}</td>
            <td><span title="{row.mailInfo -> f:format.html()}"><f:format.html>{row.iconInfo}</f:format.html></span></td>
        </tr>
        <tr class="db_list_normal">
            <td><f:translate key="{lll}view_delivery_begin_end" /></td>
            <td>{row.delBegin} / {row.delEnd}</td>
            <td>&nbsp;</td>
        </tr>
        <tr class="db_list_normal">
            <td><f:translate key="{lll}view_recipient_total_sent" /></td>
            <td>{row.totalRecip} / {row.sentRecip}</td>
            <td>&nbsp;</td>
        </tr>
    </table>
    <div style="padding-top: 5px;"></div>
</f:section>